CREATE DATABASE arcadiadb;

CREATE TABLE arc_habitat (
	id SERIAL PRIMARY KEY,
	ha_name VARCHAR(60) NOT NULL, 
	ha_description TEXT,
	ha_images VARCHAR(255),
	ha_comment TEXT
);

ALTER TABLE Habitat RENAME COLUMN id TO ha_id;


CREATE TABLE arc_animal (
	an_id SERIAL PRIMARY KEY,
	an_name VARCHAR(60) NOT NULL, 
	an_species VARCHAR(60),
	an_images VARCHAR(255)
);

CREATE TABLE arc_visit (
	vi_id SERIAL PRIMARY KEY,
	vi_condition VARCHAR(255) NOT NULL, 
	vi_date DATE NOT NULL,
	vi_condition_details TEXT
);

CREATE TABLE arc_animal_visit (
	av_id SERIAL PRIMARY KEY,
	av_animal_id INT NOT NULL REFERENCES arc_animal(an_id) ON DELETE CASCADE, 
	av_visit_id INT NOT NULL REFERENCES arc_visit(vi_id) ON DELETE CASCADE
);

CREATE TABLE arc_food (
	fo_id SERIAL PRIMARY KEY,
	fo_type VARCHAR(255) NOT NULL
);

CREATE TABLE arc_instruction (
	in_id SERIAL PRIMARY KEY,
	in_food_id INT NOT NULL REFERENCES arc_food(fo_id) ON DELETE RESTRICT,
	in_animal_id INT NOT NULL REFERENCES arc_animal(an_id) ON DELETE CASCADE,
	in_quantity REAL
);

CREATE TABLE arc_feeding (
	fe_id SERIAL PRIMARY KEY,
	fe_food_id INT NOT NULL REFERENCES arc_food(fo_id) ON DELETE RESTRICT,
	fe_animal_id INT NOT NULL REFERENCES arc_animal(an_id) ON DELETE CASCADE,
	fe_quantity REAL NOT NULL,
	fe_date DATE NOT NULL,
	fe_time TIME NOT NULL
);

CREATE TABLE arc_service (
	se_id SERIAL PRIMARY KEY,
	se_name VARCHAR(255) NOT NULL,
	se_description TEXT
);

CREATE TABLE arc_review (
	re_id SERIAL PRIMARY KEY,
	re_pseudo VARCHAR(60) NOT NULL,
	re_review TEXT NOT NULL,
	re_approved BOOL
);

CREATE TABLE arc_user (
	us_id SERIAL PRIMARY KEY,
	us_email VARCHAR(60) NOT NULL,
	us_password VARCHAR(255) NOT NULL,
	us_role VARCHAR(60) NOT NULL
);

INSERT INTO arc_habitat(ha_name, ha_description)
VALUES ('jungle', 'la jungle est un espace exotique')
RETURNING ha_id;

INSERT INTO arc_habitat(ha_name, ha_description)
VALUES ('savane', 'la savane est un espace exotique')
RETURNING ha_id;

UPDATE arc_habitat
SET ha_description = 'L''espace jungle de notre zoo est une immersion totale dans l''exubérante forêt tropicale. Dès votre entrée, une végétation luxuriante vous entoure, avec des lianes pendantes, des fougères géantes et des arbres imposants abritant une multitude de créatures exotiques. Vous pouvez apercevoir des singes espiègles se balancer de branche en branche, tandis que des perroquets colorés survolent les sentiers. Des panneaux éducatifs jalonnent le parcours, offrant des informations fascinantes sur les espèces végétales et animales de la jungle. L''humidité ambiante et les sons envoûtants de la faune créent une expérience sensorielle unique, transportant les visiteurs au cœur de la nature sauvage.'
WHERE ha_name = 'jungle';

INSERT INTO arc_habitat(ha_name,ha_description)
VALUES ('marais', 'L''espace marais de notre zoo vous plonge dans l''atmosphère des zones humides. En avançant sur des passerelles surélevées, vous pourrez admirer des étendues d''eau bordées de joncs et de nénuphars. Des tortues paressent sur des troncs d''arbres émergés, tandis que des alligators se dissimulent à peine sous la surface calme de l''eau. Des oiseaux, comme les hérons et les ibis, picorent dans les marécages à la recherche de leur prochain repas. Vous découvrirez également une variété de poissons et d''amphibiens. Des panneaux informatifs racontent l''importance écologique des marais et la diversité des espèces qui y vivent. Vous apprécierez cette promenade relaxante au cœur de ce biotope fascinant et vital.');

UPDATE arc_habitat
SET ha_images = 'jungle.webp'
WHERE ha_name = 'jungle';
UPDATE arc_habitat
SET ha_images = 'savane.webp'
WHERE ha_name = 'savane';
UPDATE arc_habitat
SET ha_images = 'marais.webp'
WHERE ha_name = 'marais';

INSERT INTO arc_service(se_name,se_description)
VALUES ('restauration','Notre zoo propose une variété de services de restauration pour satisfaire toutes vos envies culinaires pendant votre visite. Vous trouverez plusieurs snacks disséminés dans le parc, offrant des en-cas rapides comme des sandwiches, des fruits frais et des boissons rafraîchissantes. Pour une pause gourmande, arrêtez-vous à l''un de nos stands de glace, où des délices glacés aux saveurs variées raviront petits et grands. Pour un repas plus complet, notre restaurant vous accueille dans un cadre convivial, avec un menu diversifié comprenant des plats chauds, des salades, et des options végétariennes. Des aires de pique-nique ont été également été aménagées dans chaque espace.');
INSERT INTO arc_service(se_name,se_description)
VALUES ('visite guidée des habitats','Profitez de visites guidées gratuites des habitats. Elles vous permettront de découvrir nos animaux de manière enrichissante et éducative. Chaque visite est une occasion d''apprendre des anecdotes fascinantes sur les espèces que vous rencontrez, leurs comportements et leurs habitats naturels. Les guides sont également disponibles pour répondre à vos questions et partager des faits surprenants. Ces visites guidées sont idéales pour tous les âges, offrant une expérience immersive et interactive qui enrichira votre visite et vous laissera avec des souvenirs inoubliables.');
INSERT INTO arc_service(se_name,se_description)
VALUES ('Petit train','Embarquez à bord de notre petit train, qui vous conduira à travers les différentes zones du parc, telles que la jungle, la savane et les marais. Conçu pour toute la famille, ce moyen de transport pratique permet de profiter d''une vue panoramique sur les habitats et les animaux, tout en se relaxant. Le petit train est commenté, offrant des informations intéressantes et des anecdotes amusantes sur les espèces que vous croisez. C''est l''occasion idéale pour découvrir le zoo sans fatigue. Rejoignez-nous pour une expérience mémorable et conviviale, qui plaira aux petits comme aux grands.');

ALTER TABLE arc_service
ADD COLUMN se_images VARCHAR(255);

UPDATE arc_service
SET se_images = 'restaurant.webp'
WHERE se_name = 'restauration';

UPDATE arc_service
SET se_images = 'petit_train.webp'
WHERE se_name = 'petit train';

UPDATE arc_service
SET se_images = 'visite_guidee.webp'
WHERE se_name = 'visite guidée des habitats';

UPDATE arc_service
SET se_name = 'petit train'
WHERE se_name = 'Petit train';

UPDATE arc_service
SET se_images = 'petit_train.webp'
WHERE se_name = 'petit train';

UPDATE arc_service
SET se_images = 'petit_train.webp'
WHERE se_name = 'petit train';

INSERT INTO arc_review (re_pseudo, re_review, re_approved)
VALUES ('Marie63','Nous avons passé une superbe journée à Arcadia. C’est un plaisir de voir que les animaux sont si bien traités :)',true);

INSERT INTO arc_review (re_pseudo, re_review, re_approved)
VALUES ('Paul.legarec','Bravo pour ce joli parc, toute la famille a adoré !',true);

INSERT INTO arc_review (re_pseudo, re_review, re_approved)
VALUES ('Julie87','Quel plaisir de voir un parc où les animaux sont si bien traités ! Nous avons aimé les explications des guides.',true);

